{% extends '@Frontend/layout.html.twig' %}

{% block stylesheets %}
{% endblock %}

{% block body %}
    <div class="section section-padding courses-detail">
        <div class="container">
            <div class="courses-detail-wrapper">
                <div class="row">
                    <div class="col-md-12">
                        <div class="course-des">
                            <div class="course-des-title underline">4.2 Minutas</div>
                            <div class="col-sm-12" id="impresion">
                                <div class="status alert alert-success" style="display: none"></div>
                                {{ form_start(form, {'action':path('minutas')}) }}
                                    <div class="col-xs-12 col-xs-offset-0 col-sm-12 col-sm-offset-0 col-md-6 col-md-offset-0 col-lg-6 col-lg-offset-0">
                                        <div class="form-group">
                                            <label for="textbox" class="textbox">Fecha <span class="highlight">*</span></label>
                                            {{ form_widget(form.fecha, {'attr':{'class': 'form-control'}}) }}
                                            {% if form.fecha.vars.errors|length > 0 %}
                                                <label class="panel-login">
                                                    <div class="login_result">
                                                        {% for error in form.fecha.vars.errors %}
                                                            {{ error.message }} <br/>
                                                        {% endfor %}
                                                    </div>
                                                </label>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-xs-offset-0 col-sm-12 col-sm-offset-0 col-md-6 col-md-offset-0 col-lg-6 col-lg-offset-0">
                                        <div class="form-group">
                                            <label for="textbox" class="textbox">Tema <span class="highlight">*</span></label>
                                            {{ form_widget(form.tema, {'attr':{'class': 'form-control'}} )}}
                                            {% if form.tema.vars.errors|length > 0 %}
                                                <label class="panel-login">
                                                    <div class="login_result">
                                                        {% for error in form.tema.vars.errors %}
                                                            {{ error.message }} <br/>
                                                        {% endfor %}
                                                    </div>
                                                </label>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-xs-offset-0 col-sm-12 col-sm-offset-0 col-md-6 col-md-offset-0 col-lg-6 col-lg-offset-0">
                                        <div class="form-group">
                                            <label for="textbox" class="textbox">Empresa <span class="highlight">*</span></label>
                                            {{ form_widget(form.empresa, {'attr':{'class': 'form-control'}} )}}
                                            {% if form.empresa.vars.errors|length > 0 %}
                                                <label class="panel-login">
                                                    <div class="login_result">
                                                        {% for error in form.empresa.vars.errors %}
                                                            {{ error.message }} <br/>
                                                        {% endfor %}
                                                    </div>
                                                </label>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-xs-offset-0 col-sm-12 col-sm-offset-0 col-md-6 col-md-offset-0 col-lg-6 col-lg-offset-0">
                                        <div class="form-group">
                                            <label for="textbox" class="textbox">Duración <span class="highlight">*</span></label>
                                            {{ form_widget(form.duracion, {'attr':{'class': 'form-control'}} )}}
                                            {% if form.duracion.vars.errors|length > 0 %}
                                                <label class="panel-login">
                                                    <div class="login_result">
                                                        {% for error in form.duracion.vars.errors %}
                                                            {{ error.message }} <br/>
                                                        {% endfor %}
                                                    </div>
                                                </label>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-xs-offset-0 col-sm-12 col-sm-offset-0 col-md-6 col-md-offset-0 col-lg-6 col-lg-offset-0">
                                        <div class="form-group">
                                            <label for="textbox" class="textbox">Asistentes <span class="highlight">*</span></label>
                                            {{ form_widget(form.asistentes, {'attr':{'rows':'5', 'class': 'form-control'}}) }}
                                            {% if form.asistentes.vars.errors|length > 0 %}
                                                <label class="panel-login">
                                                    <div class="login_result">
                                                        {% for error in form.asistentes.vars.errors %}
                                                            {{ error.message }} <br/>
                                                        {% endfor %}
                                                    </div>
                                                </label>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-xs-offset-0 col-sm-12 col-sm-offset-0 col-md-6 col-md-offset-0 col-lg-6 col-lg-offset-0">
                                        <div class="form-group">
                                            <label for="textbox" class="textbox">Puntos a tratar <span class="highlight">*</span></label>
                                            {{ form_widget(form.puntos, {'attr':{'rows':'5', 'class': 'form-control'}}) }}
                                            {% if form.puntos.vars.errors|length > 0 %}
                                                <label class="panel-login">
                                                    <div class="login_result">
                                                        {% for error in form.puntos.vars.errors %}
                                                            {{ error.message }} <br/>
                                                        {% endfor %}
                                                    </div>
                                                </label>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-xs-offset-0 col-sm-12 col-sm-offset-0 col-md-6 col-md-offset-0 col-lg-6 col-lg-offset-0">
                                        <div class="form-group">
                                            <label for="textbox" class="textbox">Acuerdos <span class="highlight">*</span></label>
                                            {{ form_widget(form.acuerdos, {'attr':{'rows':'5', 'class': 'form-control'}}) }}
                                            {% if form.acuerdos.vars.errors|length > 0 %}
                                                <label class="panel-login">
                                                    <div class="login_result">
                                                        {% for error in form.acuerdos.vars.errors %}
                                                            {{ error.message }} <br/>
                                                        {% endfor %}
                                                    </div>
                                                </label>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-xs-offset-0 col-sm-12 col-sm-offset-0 col-md-6 col-md-offset-0 col-lg-6 col-lg-offset-0">
                                        <div class="form-group">
                                            <label for="textbox" class="textbox">Fecha de la siguiente reunion <span class="highlight">*</span></label>
                                            {{ form_widget(form.fechasiguiente, {'attr':{'class': 'form-control'}}) }}
                                            {% if form.fechasiguiente.vars.errors|length > 0 %}
                                                <label class="panel-login">
                                                    <div class="login_result">
                                                        {% for error in form.fechasiguiente.vars.errors %}
                                                            {{ error.message }} <br/>
                                                        {% endfor %}
                                                    </div>
                                                </label>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-xs-offset-0 col-sm-12 col-sm-offset-0 col-md-12 col-md-offset-0 col-lg-12 col-lg-offset-0">
                                        {#<div class="col-xs-6 col-xs-offset-0 col-sm-6 col-sm-offset-0 col-md-6 col-md-offset-0 col-lg-6 col-lg-offset-0">#}
                                        {#<button  type="button" class="btn btn-contact btn-green pull-left" ><span>Enviar por correo</span></button>#}
                                        <button type="submit" id="corebundle_minutas_enviar" name="corebundle_minutas[enviar]" value="Imprimir" class="btn btn-contact btn-green pull-right" onclick="PrintElem(impresion)">Imprimir y enviar por correo</button>
                                            {#{{ form_widget(form.enviar, {'attr': {'value':"Imprimir", 'class ': 'btn btn-contact btn-green pull-right', 'onclick':'PrintElem(impresion)'} }) }}#}
                                        {#</div>#}
                                        {#<div class="col-xs-6 col-xs-offset-0 col-sm-6 col-sm-offset-0 col-md-6 col-md-offset-0 col-lg-6 col-lg-offset-0">
                                            <div>
                                                <button class="btn btn-contact btn-green" onclick="printDiv('impresion')"><span>IMPRIMIR</span></button>
                                            </div>
                                        </div>#}
                                        {#<div class="col-xs-6 col-xs-offset-0 col-sm-6 col-sm-offset-0 col-md-6 col-md-offset-0 col-lg-6 col-lg-offset-0">
                                            <div>
                                                <button class="btn btn-contact btn-green pull-right" onclick="PrintElem('impresion')"><span>IMPRIMIR</span></button>
                                            </div>
                                        </div>#}
                                    </div>
                                {{ form_end(form) }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button onclick="window.location.href='../gestion'" class="btn btn-green-2" style="left: 45%;">
                <span>Regresar</span>
            </button>
        </div>
    </div>
{% endblock %}


{% block javascripts %}
    <script>
        function printDiv(divName) {
            var printContents = document.getElementById(divName).innerHTML;
            var originalContents = document.body.innerHTML;

            document.body.innerHTML = printContents;

            window.print();

            document.body.innerHTML = originalContents;

            window.close()
        }


        function PrintElem(elem)
        {
            var mywindow = window.open('', 'PRINT', 'height=600,width=800');
            mywindow.document.write('<html><head><title>' + document.title  + '</title>');

            mywindow.document.write('</head><body >');
            mywindow.document.write('<h1>' + document.title  + '</h1>');
            mywindow.document.write('<label style="display: inline-block; max-width: 100%; margin-bottom: 5px; font-weight: bold;"> Fecha: </label><br/>');
            mywindow.document.write('<input style="display: block; width: 100%; height: 34px; padding: 6px 12px; font-size: 14px; line-height: 1.42857143; color: #555; background-color: #fff; border: 1px solid #ccc; border-radius: 4px; box-shadow: inset 0 1px 1px rgba(0,0,0,.075);" value="'+document.forms.corebundle_minutas.corebundle_minutas_fecha.value+'"><br/>');
            mywindow.document.write('<label style="display: inline-block; max-width: 100%; margin-bottom: 5px; font-weight: bold;"> Tema: </label><br/>');
            mywindow.document.write('<input style="display: block; width: 100%; height: 34px; padding: 6px 12px; font-size: 14px; line-height: 1.42857143; color: #555; background-color: #fff; border: 1px solid #ccc; border-radius: 4px; box-shadow: inset 0 1px 1px rgba(0,0,0,.075);" value="'+document.forms.corebundle_minutas.corebundle_minutas_tema.value+'"><br/>');
            mywindow.document.write('<label style="display: inline-block; max-width: 100%; margin-bottom: 5px; font-weight: bold;"> Empresa: </label><br/>');
            mywindow.document.write('<input style="display: block; width: 100%; height: 34px; padding: 6px 12px; font-size: 14px; line-height: 1.42857143; color: #555; background-color: #fff; border: 1px solid #ccc; border-radius: 4px; box-shadow: inset 0 1px 1px rgba(0,0,0,.075);" value="'+document.forms.corebundle_minutas.corebundle_minutas_empresa.value+'"><br/>');
            mywindow.document.write('<label style="display: inline-block; max-width: 100%; margin-bottom: 5px; font-weight: bold;"> Duración: </label><br/>');
            mywindow.document.write('<input style="display: block; width: 100%; height: 34px; padding: 6px 12px; font-size: 14px; line-height: 1.42857143; color: #555; background-color: #fff; border: 1px solid #ccc; border-radius: 4px; box-shadow: inset 0 1px 1px rgba(0,0,0,.075);" value="'+document.forms.corebundle_minutas.corebundle_minutas_duracion.value+'"><br/>');
            mywindow.document.write('<label style="display: inline-block; max-width: 100%; margin-bottom: 5px; font-weight: bold;"> Asistentes: </label><br/>');
            mywindow.document.write('<textarea rows="5" style="display: block; width: 100%; height: auto; padding: 6px 12px; font-size: 14px; line-height: 1.42857143; color: #555; background-color: #fff; border: 1px solid #ccc; border-radius: 4px; box-shadow: inset 0 1px 1px rgba(0,0,0,.075);">'+document.forms.corebundle_minutas.corebundle_minutas_asistentes.value+'</textarea><br/>');
            mywindow.document.write('<label style="display: inline-block; max-width: 100%; margin-bottom: 5px; font-weight: bold;"> Puntos a tratar: </label><br/>');
            mywindow.document.write('<textarea rows="5" style="display: block; width: 100%; height: auto; padding: 6px 12px; font-size: 14px; line-height: 1.42857143; color: #555; background-color: #fff; border: 1px solid #ccc; border-radius: 4px; box-shadow: inset 0 1px 1px rgba(0,0,0,.075);">'+document.forms.corebundle_minutas.corebundle_minutas_puntos.value+'</textarea><br/>');
            mywindow.document.write('<label style="display: inline-block; max-width: 100%; margin-bottom: 5px; font-weight: bold;"> Acuerdos: </label><br/>');
            mywindow.document.write('<textarea rows="5" style="display: block; width: 100%; height: auto; padding: 6px 12px; font-size: 14px; line-height: 1.42857143; color: #555; background-color: #fff; border: 1px solid #ccc; border-radius: 4px; box-shadow: inset 0 1px 1px rgba(0,0,0,.075);">'+document.forms.corebundle_minutas.corebundle_minutas_acuerdos.value+'</textarea><br/>');
            mywindow.document.write('<label style="display: inline-block; max-width: 100%; margin-bottom: 5px; font-weight: bold;"> Fecha de la siguiente reunión: </label><br/>');
            mywindow.document.write('<input style="display: block; width: 100%; height: 34px; padding: 6px 12px; font-size: 14px; line-height: 1.42857143; color: #555; background-color: #fff; border: 1px solid #ccc; border-radius: 4px; box-shadow: inset 0 1px 1px rgba(0,0,0,.075);" value="'+document.forms.corebundle_minutas.corebundle_minutas_fechasiguiente.value+'"><br/>');
            /*mywindow.document.write(document.getElementById(elem).nodeValue);*/
            mywindow.document.write('</body></html>');

            mywindow.document.close(); // necessary for IE >= 10
            mywindow.focus(); // necessary for IE >= 10*/

            mywindow.print();
            mywindow.close();

            return true;

        }
    </script>
{% endblock %}
